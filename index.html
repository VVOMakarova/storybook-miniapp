<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Storybook Mini App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color:#0f172a;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      padding:16px;
      min-height:100vh;
      background: radial-gradient(circle at 10% 20%, #c2f0ff 0, #9de1ff 25%, #77cffc 60%, #5ab8f5 100%);
      position:relative;
      overflow-x:hidden;
    }

    /* –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø—É–∑—ã—Ä–∏ –Ω–∞ —Ñ–æ–Ω–µ (–Ω–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) */
    .decor-bubbles{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:-1;
    }
    .decor-bubble{
      position:absolute;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0));
      border:1px solid rgba(255,255,255,0.9);
      opacity:0.55;
      filter: blur(0.5px);
    }
    .decor-bubble--1{ width:140px;height:140px;top:6%;left:6%; }
    .decor-bubble--2{ width:110px;height:110px;top:18%;right:10%; }
    .decor-bubble--3{ width:90px;height:90px;bottom:18%;left:15%; }
    .decor-bubble--4{ width:160px;height:160px;bottom:-30px;right:-10px;opacity:0.4; }
    .decor-bubble--5{ width:70px;height:70px;top:50%;left:55%;opacity:0.45; }

    .container{ max-width:480px; margin:0 auto; }

    .bubble-card{
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.95), rgba(255,255,255,0.78));
      border-radius:32px;
      padding:18px 16px 20px;
      box-shadow:
        0 18px 40px rgba(15,23,42,0.35),
        0 0 0 1px rgba(255,255,255,0.7);
      backdrop-filter: blur(12px);
    }

    .lang-switch{
      display:flex;
      justify-content:flex-end;
      gap:8px;
      margin-bottom:10px;
    }
    .lang-btn{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.8);
      background: rgba(255,255,255,0.9);
      padding:4px 12px;
      font-size:11px;
      cursor:pointer;
      box-shadow:0 3px 6px rgba(15,23,42,0.15);
      transition: all 0.18s ease;
      color:#000;
    }
    .lang-btn--active{
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      color:#000;
      border-color: transparent;
      box-shadow:
        0 4px 10px rgba(79,70,229,0.55),
        0 0 0 1px rgba(255,255,255,0.8) inset;
    }

    .hero{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:8px;
    }
    .hero-illustration{
      width:84px;height:84px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 20%, #ffe0f2 0, #ffb6dd 45%, #ff9fd6 80%);
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:
        0 8px 18px rgba(244,114,182,0.5),
        0 0 0 3px rgba(255,255,255,0.8);
      overflow:hidden;
    }
    .hero-emoji{
      font-size:40px;
      line-height:1;
      transform: translateY(2px);
    }
    .hero-text{ flex:1; min-width:0; }
    h1{ font-size:20px; margin:0 0 4px; }
    p.description{ font-size:13px; margin:0; color:#4b5563; }

    form{ margin-top:10px; }

    .field{
      margin-bottom:12px;
      padding:8px 10px 10px;
      border-radius:18px;
      background: radial-gradient(circle at 15% 10%, rgba(255,255,255,0.98), rgba(255,255,255,0.78));
      box-shadow:
        0 6px 12px rgba(15,23,42,0.12),
        0 0 0 1px rgba(255,255,255,0.85);
    }
    label{
      display:block;
      font-size:12px;
      margin-bottom:4px;
      color:#334155;
    }
    .field-hint{
      display:block;
      margin-top:4px;
      font-size:11px;
      color:#6b7280;
    }
    .field-subtitle{
      display:block;
      margin:8px 0 6px;
      font-size:11px;
      color:#475569;
      font-weight:600;
    }

    input, select, textarea{
      width:100%;
      padding:7px 12px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      font-size:13px;
      outline:none;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 2px 4px rgba(15,23,42,0.05) inset;
    }
    textarea{
      border-radius:18px;
      resize:vertical;
      min-height:60px;
    }
    input::placeholder, textarea::placeholder{ color:#9ca3af; }
    input:focus, select:focus, textarea:focus{
      border-color:#6366f1;
      box-shadow:
        0 0 0 1px rgba(129,140,248,0.6),
        0 0 0 4px rgba(129,140,248,0.26);
      background:#fff;
    }

    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .grid-3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; }
    @media (max-width:390px){
      .grid-2,.grid-3{ grid-template-columns:1fr; }
    }

    .hidden{ display:none !important; }

    /* –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏-—Ä–µ–∂–∏–º—ã */
    .mode-grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:10px;
      margin-top:6px;
    }
    .mode-grid--2{
      grid-template-columns:repeat(2, 1fr);
    }
    .mode-tile{
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.85);
      background: rgba(255,255,255,0.92);
      padding:10px;
      cursor:pointer;
      color:#0f172a;
      box-shadow: 0 6px 12px rgba(15,23,42,0.10);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      text-align:left;
      aspect-ratio:1/1;
      min-height:78px;
    }
    .mode-tile:active{ transform:translateY(1px); filter:brightness(0.99); }
    .mode-tile--active{
      background: linear-gradient(135deg, rgba(99,102,241,0.95), rgba(139,92,246,0.95));
      border-color: transparent;
      color:#0b1020;
      box-shadow: 0 10px 18px rgba(79,70,229,0.30), 0 0 0 1px rgba(255,255,255,0.9) inset;
    }
    .mode-tile span{ font-size:12px; font-weight:700; line-height:1.15; }
    .mode-tile small{ font-size:10px; color: rgba(15,23,42,0.72); line-height:1.2; }
    .mode-tile--active small{ color: rgba(15,23,42,0.82); }
    @media (max-width:390px){
      .mode-grid{ grid-template-columns:1fr; }
      .mode-grid--2{ grid-template-columns:1fr; }
      .mode-tile{ aspect-ratio:auto; min-height:64px; }
    }

    /* –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–º –∑–æ–Ω–∞ */
    .attention-block{
      margin-top:10px;
      padding:12px;
      border-radius:18px;
      background: radial-gradient(circle at 15% 10%, rgba(255,255,255,0.98), rgba(221,214,254,0.55));
      border:1px solid rgba(139,92,246,0.35);
      box-shadow:
        0 10px 18px rgba(79,70,229,0.12),
        0 0 0 1px rgba(255,255,255,0.85) inset;
    }
    .attention-title{
      display:block;
      margin:0 0 8px;
      font-size:11px;
      font-weight:800;
      color:#4338ca;
      letter-spacing:0.2px;
    }

    /* –∫–∞—Ä—Ç–æ—á–∫–∏-–ø—Ä–µ—Å–µ—Ç—ã (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ) */
    .preset-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    @media (max-width:390px){
      .preset-grid{ grid-template-columns:1fr; }
    }
    .preset-btn{
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.85);
      background: rgba(255,255,255,0.92);
      padding:10px 10px 9px;
      cursor:pointer;
      color:#0f172a;
      box-shadow: 0 6px 12px rgba(15,23,42,0.10);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
      text-align:left;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .preset-btn:active{ transform:translateY(1px); filter:brightness(0.99); }
    .preset-btn--active{
      background: linear-gradient(135deg, rgba(99,102,241,0.95), rgba(139,92,246,0.95));
      border-color:transparent;
      box-shadow: 0 10px 18px rgba(79,70,229,0.25), 0 0 0 1px rgba(255,255,255,0.9) inset;
    }
    .preset-btn b{
      font-size:12px;
      line-height:1.15;
      color:#0b1020;
    }
    .preset-btn p{
      margin:0;
      font-size:10px;
      line-height:1.2;
      color: rgba(15,23,42,0.72);
    }
    .preset-btn--active b{ color:#0b1020; }
    .preset-btn--active p{ color: rgba(15,23,42,0.82); }

    /* –Ω–µ–±–æ–ª—å—à–∏–µ ¬´—á–∏–ø—ã¬ª (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –≤—ã–±–æ—Ä–æ–≤) */
    .chip-row{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:6px;
    }
    .chip{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.85);
      background: rgba(255,255,255,0.92);
      padding:6px 10px;
      font-size:12px;
      cursor:pointer;
      color:#0f172a;
      box-shadow: 0 3px 6px rgba(15,23,42,0.10);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
      text-align:left;
      white-space:nowrap;
    }
    .chip:active{ transform:translateY(1px); filter:brightness(0.99); }
    .chip--active{
      background: linear-gradient(135deg, rgba(99,102,241,0.95), rgba(139,92,246,0.95));
      border-color:transparent;
      box-shadow: 0 6px 14px rgba(79,70,229,0.25), 0 0 0 1px rgba(255,255,255,0.9) inset;
    }

    button[type="submit"]{
      width:100%;
      padding:11px 16px;
      border-radius:999px;
      border:none;
      font-size:15px;
      font-weight:700;
      cursor:pointer;
      background: radial-gradient(circle at 20% 0, #a5b4fc, #6366f1);
      color:#fff;
      box-shadow:
        0 10px 20px rgba(79,70,229,0.55),
        0 0 0 1px rgba(255,255,255,0.9) inset;
      margin-top:4px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }
    button[type="submit"]:active{
      transform:translateY(1px);
      box-shadow:
        0 6px 14px rgba(79,70,229,0.55),
        0 0 0 1px rgba(255,255,255,0.9) inset;
      filter:brightness(0.98);
    }
    button[type="submit"]:disabled{
      opacity:0.7;
      cursor:default;
      box-shadow:
        0 4px 8px rgba(148,163,184,0.5),
        0 0 0 1px rgba(255,255,255,0.9) inset;
    }

    .note{
      font-size:11px;
      color:#475569;
      margin-top:8px;
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="decor-bubbles">
    <span class="decor-bubble decor-bubble--1"></span>
    <span class="decor-bubble decor-bubble--2"></span>
    <span class="decor-bubble decor-bubble--3"></span>
    <span class="decor-bubble decor-bubble--4"></span>
    <span class="decor-bubble decor-bubble--5"></span>
  </div>

  <main class="container">
    <div class="bubble-card">
      <div class="lang-switch">
        <button type="button" class="lang-btn" id="btnLangRu" data-lang="ru">RU</button>
        <button type="button" class="lang-btn" id="btnLangEn" data-lang="en">EN</button>
      </div>

      <div class="hero">
        <div class="hero-illustration">
          <span class="hero-emoji">üìñ</span>
        </div>
        <div class="hero-text">
          <h1 id="title" data-i18n="title">–°–æ–∑–¥–∞—Ç—å —Å–∫–∞–∑–∫—É</h1>
          <p class="description" id="description" data-i18n="description">
            –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî –±–æ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å–∫–∞–∑–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ—ë –≤ —á–∞—Ç –≤ –≤–∏–¥–µ PDF-–∫–Ω–∏–≥–∏.
          </p>
        </div>
      </div>

      <form id="storyForm">
        <!-- –ü.1 -->
        <div class="field">
          <label for="main_hero_name" id="label_main_hero_name" data-i18n="label_main_hero_name">–ò–º—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è *</label>
          <input id="main_hero_name" name="main_hero_name" required data-i18n-placeholder="ph_main_hero_name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ê—Ä–∏–Ω–∞" />
        </div>

        <!-- –ü.2 -->
        <div class="field">
          <label id="label_main_hero_mode" data-i18n="label_main_hero_mode">–í–Ω–µ—à–Ω–æ—Å—Ç—å –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è *</label>

          <div class="mode-grid" id="mainHeroModeTiles">
            <button type="button" class="mode-tile mode-tile--active" data-value="auto">
              <span data-i18n="main_mode_auto_title">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–Ω–µ—à–Ω–æ—Å—Ç—å</span>
              <small data-i18n="main_mode_auto_desc">–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</small>
            </button>

            <button type="button" class="mode-tile" data-value="select">
              <span data-i18n="main_mode_select_title">–í—ã–±—Ä–∞—Ç—å –≤–Ω–µ—à–Ω–æ—Å—Ç—å</span>
              <small data-i18n="main_mode_select_desc">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –∫–æ–∂–∞, –≥–ª–∞–∑–∞, –≤–æ–ª–æ—Å—ã‚Ä¶</small>
            </button>

            <button type="button" class="mode-tile" data-value="photo">
              <span data-i18n="main_mode_photo_title">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</span>
              <small data-i18n="main_mode_photo_desc">–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –≤ —á–∞—Ç –ø–æ—Å–ª–µ —Ñ–æ—Ä–º—ã</small>
            </button>
          </div>

          <input type="hidden" id="main_hero_appearance_mode" name="main_hero_appearance_mode" value="auto" />

          <div id="mainHeroAppearanceBlock" class="attention-block hidden">
            <span class="attention-title" data-i18n="main_appearance_title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ (–¥–ª—è —É–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç–∏)</span>

            <div class="grid-2">
              <div>
                <label for="main_age_years" data-i18n="label_main_age_years">–í–æ–∑—Ä–∞—Å—Ç (—Ü–∏—Ñ—Ä–æ–π)</label>
                <input id="main_age_years" name="main_age_years" inputmode="numeric" data-i18n-placeholder="ph_main_age_years" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 4" />
              </div>
              <div>
                <label for="main_gender" data-i18n="label_main_gender">–ü–æ–ª</label>
                <select id="main_gender" name="main_gender">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="girl" data-i18n="opt_girl">–î–µ–≤–æ—á–∫–∞</option>
                  <option value="boy" data-i18n="opt_boy">–ú–∞–ª—å—á–∏–∫</option>
                </select>
              </div>
            </div>

            <div class="grid-2">
              <div>
                <label for="main_skin_tone" data-i18n="label_main_skin_tone">–¢–æ–Ω –∫–æ–∂–∏ *</label>
                <select id="main_skin_tone" name="main_skin_tone">
                  <option value="" data-i18n="opt_pick" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
                  <option value="very_light" data-i18n="opt_skin_very_light">–û—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–π</option>
                  <option value="light" data-i18n="opt_skin_light">–°–≤–µ—Ç–ª—ã–π</option>
                  <option value="medium" data-i18n="opt_skin_medium">–°—Ä–µ–¥–Ω–∏–π</option>
                  <option value="tan" data-i18n="opt_skin_tan">–°–º—É–≥–ª—ã–π</option>
                  <option value="dark" data-i18n="opt_skin_dark">–¢—ë–º–Ω—ã–π</option>
                </select>
              </div>
              <div>
                <label for="main_face_shape" data-i18n="label_main_face_shape">–§–æ—Ä–º–∞ –ª–∏—Ü–∞</label>
                <select id="main_face_shape" name="main_face_shape">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="round" data-i18n="opt_face_round">–ö—Ä—É–≥–ª–æ–µ</option>
                  <option value="oval" data-i18n="opt_face_oval">–û–≤–∞–ª—å–Ω–æ–µ</option>
                  <option value="long" data-i18n="opt_face_long">–£–¥–ª–∏–Ω—ë–Ω–Ω–æ–µ</option>
                </select>
              </div>
            </div>

            <div>
              <label for="main_face_accent" data-i18n="label_main_face_accent">–ê–∫—Ü–µ–Ω—Ç –ª–∏—Ü–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input id="main_face_accent" name="main_face_accent" maxlength="120" data-i18n-placeholder="ph_main_face_accent" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Å–Ω—É—à–∫–∏" />
              <small class="field-hint" data-i18n="hint_main_face_accent">–ö–æ—Ä–æ—Ç–∫–∞—è –¥–µ—Ç–∞–ª—å, –∫–æ—Ç–æ—Ä—É—é –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.</small>
            </div>

            <span class="field-subtitle" data-i18n="sub_eyes">–ì–ª–∞–∑–∞</span>
            <div class="grid-3">
              <div>
                <label for="main_eyes_color" data-i18n="label_main_eyes_color">–¶–≤–µ—Ç *</label>
                <select id="main_eyes_color" name="main_eyes_color">
                  <option value="" data-i18n="opt_pick" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
                  <option value="brown" data-i18n="opt_eyes_brown">–ö–∞—Ä–∏–µ</option>
                  <option value="blue" data-i18n="opt_eyes_blue">–ì–æ–ª—É–±—ã–µ</option>
                  <option value="gray" data-i18n="opt_eyes_gray">–°–µ—Ä—ã–µ</option>
                  <option value="green" data-i18n="opt_eyes_green">–ó–µ–ª—ë–Ω—ã–µ</option>
                  <option value="hazel" data-i18n="opt_eyes_hazel">–û—Ä–µ—Ö–æ–≤—ã–µ</option>
                  <option value="unspecified" data-i18n="opt_unspecified">–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                </select>
              </div>
              <div>
                <label for="main_eyes_shape" data-i18n="label_main_eyes_shape">–§–æ—Ä–º–∞</label>
                <select id="main_eyes_shape" name="main_eyes_shape">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="round" data-i18n="opt_eyes_shape_round">–ö—Ä—É–≥–ª—ã–µ</option>
                  <option value="almond" data-i18n="opt_eyes_shape_almond">–ú–∏–Ω–¥a–ª–µ–≤–∏–¥–Ω—ã–µ</option>
                </select>
              </div>
              <div>
                <label for="main_eyes_size" data-i18n="label_main_eyes_size">–†–∞–∑–º–µ—Ä</label>
                <select id="main_eyes_size" name="main_eyes_size">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="small" data-i18n="opt_size_small">–ù–µ–±–æ–ª—å—à–∏–µ</option>
                  <option value="medium" data-i18n="opt_size_medium">–°—Ä–µ–¥–Ω–∏–µ</option>
                  <option value="large" data-i18n="opt_size_large">–ö—Ä—É–ø–Ω—ã–µ</option>
                </select>
              </div>
            </div>

            <span class="field-subtitle" data-i18n="sub_hair">–í–æ–ª–æ—Å—ã</span>
            <div class="grid-3">
              <div>
                <label for="main_hair_color" data-i18n="label_main_hair_color">–¶–≤–µ—Ç *</label>
                <select id="main_hair_color" name="main_hair_color">
                  <option value="" data-i18n="opt_pick" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
                  <option value="blond" data-i18n="opt_hair_blond">–ë–ª–æ–Ω–¥</option>
                  <option value="light_brown" data-i18n="opt_hair_light_brown">–†—É—Å—ã–µ</option>
                  <option value="chestnut" data-i18n="opt_hair_chestnut">–ö–∞—à—Ç–∞–Ω–æ–≤—ã–µ</option>
                  <option value="dark" data-i18n="opt_hair_dark">–¢—ë–º–Ω—ã–µ</option>
                  <option value="red" data-i18n="opt_hair_red">–†—ã–∂–∏–µ</option>
                  <option value="black" data-i18n="opt_hair_black">–ß—ë—Ä–Ω—ã–µ</option>
                  <option value="unspecified" data-i18n="opt_unspecified">–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                </select>
              </div>
              <div>
                <label for="main_hair_length" data-i18n="label_main_hair_length">–î–ª–∏–Ω–∞ *</label>
                <select id="main_hair_length" name="main_hair_length">
                  <option value="" data-i18n="opt_pick" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
                  <option value="very_short" data-i18n="opt_len_very_short">–û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–µ</option>
                  <option value="short" data-i18n="opt_len_short">–ö–æ—Ä–æ—Ç–∫–∏–µ</option>
                  <option value="shoulder" data-i18n="opt_len_shoulder">–î–æ –ø–ª–µ—á</option>
                  <option value="long" data-i18n="opt_len_long">–î–ª–∏–Ω–Ω—ã–µ</option>
                  <option value="unspecified" data-i18n="opt_unspecified">–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                </select>
              </div>
              <div>
                <label for="main_hair_type" data-i18n="label_main_hair_type">–¢–∏–ø *</label>
                <select id="main_hair_type" name="main_hair_type">
                  <option value="" data-i18n="opt_pick" selected disabled>–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
                  <option value="straight" data-i18n="opt_type_straight">–ü—Ä—è–º—ã–µ</option>
                  <option value="wavy" data-i18n="opt_type_wavy">–í–æ–ª–Ω–∏—Å—Ç—ã–µ</option>
                  <option value="curly" data-i18n="opt_type_curly">–ö—É–¥—Ä—è–≤—ã–µ</option>
                  <option value="unspecified" data-i18n="opt_unspecified">–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                </select>
              </div>
            </div>

            <div class="grid-3">
              <div>
                <label for="main_hair_density" data-i18n="label_main_hair_density">–ì—É—Å—Ç–æ—Ç–∞</label>
                <select id="main_hair_density" name="main_hair_density">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="thin" data-i18n="opt_density_thin">–†–µ–¥–∫–∏–µ</option>
                  <option value="medium" data-i18n="opt_density_medium">–°—Ä–µ–¥–Ω–∏–µ</option>
                  <option value="thick" data-i18n="opt_density_thick">–ì—É—Å—Ç—ã–µ</option>
                </select>
              </div>
              <div>
                <label for="main_bangs" data-i18n="label_main_bangs">–ß—ë–ª–∫–∞</label>
                <select id="main_bangs" name="main_bangs">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="yes" data-i18n="opt_yes">–ï—Å—Ç—å</option>
                  <option value="no" data-i18n="opt_no">–ù–µ—Ç</option>
                </select>
              </div>
              <div>
                <label for="main_parting" data-i18n="label_main_parting">–ü—Ä–æ–±–æ—Ä</label>
                <select id="main_parting" name="main_parting">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="left" data-i18n="opt_left">–°–ª–µ–≤–∞</option>
                  <option value="right" data-i18n="opt_right">–°–ø—Ä–∞–≤–∞</option>
                  <option value="center" data-i18n="opt_center">–ü–æ —Ü–µ–Ω—Ç—Ä—É</option>
                </select>
              </div>
            </div>

            <div class="grid-2">
              <div>
                <label for="main_nose" data-i18n="label_main_nose">–ù–æ—Å</label>
                <select id="main_nose" name="main_nose">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="small" data-i18n="opt_nose_small">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
                  <option value="medium" data-i18n="opt_nose_medium">–°—Ä–µ–¥–Ω–∏–π</option>
                  <option value="prominent" data-i18n="opt_nose_prominent">–í—ã—Ä–∞–∂–µ–Ω–Ω—ã–π</option>
                </select>
              </div>
              <div>
                <label for="main_lips" data-i18n="label_main_lips">–ì—É–±—ã</label>
                <select id="main_lips" name="main_lips">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="thin" data-i18n="opt_lips_thin">–¢–æ–Ω–∫–∏–µ</option>
                  <option value="medium" data-i18n="opt_lips_medium">–°—Ä–µ–¥–Ω–∏–µ</option>
                  <option value="full" data-i18n="opt_lips_full">–ü—É—Ö–ª—ã–µ</option>
                </select>
              </div>
            </div>

            <span class="field-subtitle" data-i18n="sub_body">–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ</span>
            <div class="grid-2">
              <div>
                <label for="main_body_type" data-i18n="label_main_body_type">–¢–∏–ø</label>
                <select id="main_body_type" name="main_body_type">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="slim" data-i18n="opt_body_slim">–•—É–¥–æ—â–∞–≤–æ–µ</option>
                  <option value="average" data-i18n="opt_body_average">–°—Ä–µ–¥–Ω–µ–µ</option>
                  <option value="chubby" data-i18n="opt_body_chubby">–ü—É—Ö–ª–µ–Ω—å–∫–æ–µ</option>
                </select>
              </div>
              <div>
                <label for="main_height_vs_peers" data-i18n="label_main_height_vs_peers">–†–æ—Å—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤</label>
                <select id="main_height_vs_peers" name="main_height_vs_peers">
                  <option value="unspecified" data-i18n="opt_unspecified" selected>–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="shorter" data-i18n="opt_shorter">–ù–∏–∂–µ</option>
                  <option value="average" data-i18n="opt_avg">–°—Ä–µ–¥–Ω–∏–π</option>
                  <option value="taller" data-i18n="opt_taller">–í—ã—à–µ</option>
                </select>
              </div>
            </div>

            <div>
              <label for="main_special_features" data-i18n="label_main_special_features">–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–±—ë–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input id="main_special_features" name="main_special_features" maxlength="160" data-i18n-placeholder="ph_main_special_features" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—Å–∏—Ç –æ—á–∫–∏ –∫—Ä—É–≥–ª–æ–π —Ñ–æ—Ä–º—ã" />
            </div>

            <div>
              <label for="main_signature_look" data-i18n="label_main_signature_look">–§–∏—Ä–º–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input id="main_signature_look" name="main_signature_look" maxlength="160" data-i18n-placeholder="ph_main_signature_look" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—Å–∏—Ç —Ä–æ–∑–æ–≤—ã–π —Å–≤–∏—Ç–µ—Ä" />
            </div>
          </div>
        </div>

        <!-- –ü.3 -->
        <div class="field">
          <label for="second_hero_name" data-i18n="label_second_hero_name">–ò–º—è –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          <input id="second_hero_name" name="second_hero_name" data-i18n-placeholder="ph_second_hero_name" placeholder="–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º" />
          <small class="field-hint" data-i18n="hint_second_hero_name">–ï—Å–ª–∏ –∏–º—è –Ω–µ –∑–∞–¥–∞–Ω–æ, –≤—Ç–æ—Ä–æ–π –≥–µ—Ä–æ–π –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è.</small>
        </div>

        <!-- –ü.4: –≤–Ω–µ—à–Ω–æ—Å—Ç—å –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è (–ø–æ—è–≤–ª—è–µ—Ç—Å—è, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω–æ –∏–º—è) -->
        <div class="field hidden" id="secondHeroAppearanceField">
          <label data-i18n="label_second_hero_mode">–í–Ω–µ—à–Ω–æ—Å—Ç—å –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è</label>

          <div class="mode-grid" id="secondHeroModeTiles">
            <button type="button" class="mode-tile mode-tile--active" data-value="preset">
              <span data-i18n="second_mode_preset_title">–í—ã–±—Ä–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</span>
              <small data-i18n="second_mode_preset_desc">6 –≥–æ—Ç–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</small>
            </button>

            <button type="button" class="mode-tile" data-value="custom">
              <span data-i18n="second_mode_custom_title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä</span>
              <small data-i18n="second_mode_custom_desc">–ö–æ—Ä–æ—Ç–∫–∞—è –∞–Ω–∫–µ—Ç–∞</small>
            </button>

            <button type="button" class="mode-tile" data-value="photo">
              <span data-i18n="second_mode_photo_title">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</span>
              <small data-i18n="second_mode_photo_desc">–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –≤ —á–∞—Ç –ø–æ—Å–ª–µ —Ñ–æ—Ä–º—ã</small>
            </button>
          </div>

          <input type="hidden" id="second_hero_mode" name="second_hero_mode" value="preset" />
          <input type="hidden" id="second_hero_preset_id" name="second_hero_preset_id" value="puzyrek" />

          <!-- preset -->
          <div id="secondHeroPresetBlock" class="attention-block">
            <span class="attention-title" data-i18n="second_presets_title">–ì–æ—Ç–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏</span>
            <div class="preset-grid" id="secondHeroPresetGrid">
              <button type="button" class="preset-btn" data-preset="foxik">
                <b data-i18n="preset_foxik_name">–õ–∏—Å—ë–Ω–æ–∫ –§–æ–∫—Å–∏–∫</b>
                <p data-i18n="preset_foxik_desc">–ë—ã—Å—Ç—Ä—ã–π, –ª—é–±–æ–ø—ã—Ç–Ω—ã–π, –ª—é–±–∏—Ç –∑–∞–≥–∞–¥–∫–∏ –∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–ª–∞–Ω –ê –∏ –ø–ª–∞–Ω –ë</p>
              </button>
              <button type="button" class="preset-btn" data-preset="tikhonya">
                <b data-i18n="preset_tikhonya_name">–°–æ–≤–∞ –¢–∏—Ö–æ–Ω—è</b>
                <p data-i18n="preset_tikhonya_desc">–°–ø–æ–∫–æ–π–Ω–∞—è, –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–∞—è, –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω–æ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏</p>
              </button>
              <button type="button" class="preset-btn" data-preset="bublik">
                <b data-i18n="preset_bublik_name">–©–µ–Ω–æ–∫ –ë—É–±–ª–∏–∫</b>
                <p data-i18n="preset_bublik_desc">–î–æ–±—Ä—ã–π –∏ –≤–µ—Ä–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞—à–Ω–æ –∏–ª–∏ –æ–±–∏–¥–Ω–æ</p>
              </button>
              <button type="button" class="preset-btn" data-preset="pixel">
                <b data-i18n="preset_pixel_name">–†–æ–±–æ—Ç –ü–∏–∫—Å–µ–ª—å</b>
                <p data-i18n="preset_pixel_desc">–ò–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫, —Å—Ç—Ä–æ–∏—Ç –∫–∞—Ä—Ç—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
              </button>
              <button type="button" class="preset-btn" data-preset="iskrik">
                <b data-i18n="preset_iskrik_name">–î—Ä–∞–∫–æ–Ω—á–∏–∫ –ò—Å–∫—Ä–∏–∫</b>
                <p data-i18n="preset_iskrik_desc">–ë–µ–∑–æ–±–∏–¥–Ω—ã–π, ¬´—Å–æ–≥—Ä–µ–≤–∞–µ—Ç¬ª —Å–º–µ–ª–æ—Å—Ç—å –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</p>
              </button>
              <button type="button" class="preset-btn preset-btn--active" data-preset="puzyrek" id="secondPresetDefault">
                <b data-i18n="preset_puzyrek_name">–ú–æ—Ä—Å–∫–æ–π –∫–æ–Ω—ë–∫ –ü—É–∑—ã—Ä—ë–∫</b>
                <p data-i18n="preset_puzyrek_desc">–ò–≥—Ä–∏–≤—ã–π, –∑–Ω–∞–µ—Ç –º–æ—Ä—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –∏ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç –≤—ã—Ö–æ–¥</p>
              </button>
            </div>
          </div>

          <!-- custom -->
          <div id="secondHeroCustomBlock" class="attention-block hidden">
            <span class="attention-title" data-i18n="second_custom_title">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä (–∫—Ä–∞—Ç–∫–æ)</span>

            <div class="grid-2">
              <div>
                <label for="second_custom_type" data-i18n="label_second_custom_type">–¢–∏–ø –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</label>
                <select id="second_custom_type" name="second_custom_type">
                  <option value="animal" data-i18n="opt_second_type_animal">–ñ–∏–≤–æ—Ç–Ω–æ–µ</option>
                  <option value="human" data-i18n="opt_second_type_human">–ß–µ–ª–æ–≤–µ–∫</option>
                  <option value="toy" data-i18n="opt_second_type_toy">–ò–≥—Ä—É—à–∫–∞</option>
                  <option value="fantasy" data-i18n="opt_second_type_fantasy">–°–∫–∞–∑–æ—á–Ω–æ–µ —Å—É—â–µ—Å—Ç–≤–æ</option>
                  <option value="robot" data-i18n="opt_second_type_robot">–†–æ–±–æ—Ç</option>
                  <option value="animated_object" data-i18n="opt_second_type_animated">–û–∂–∏–≤—à–∏–π –ø—Ä–µ–¥–º–µ—Ç</option>
                  <option value="other" data-i18n="opt_other">–î—Ä—É–≥–æ–µ</option>
                </select>
              </div>
              <div>
                <label for="second_custom_role" data-i18n="label_second_custom_role">–ö–ª—é—á–µ–≤–∞—è —Ä–æ–ª—å</label>
                <select id="second_custom_role" name="second_custom_role">
                  <option value="helper" data-i18n="opt_role_helper">–ü–æ–º–æ—â–Ω–∏–∫</option>
                  <option value="friend" data-i18n="opt_role_friend">–î—Ä—É–≥</option>
                  <option value="mentor" data-i18n="opt_role_mentor">–ù–∞—Å—Ç–∞–≤–Ω–∏–∫</option>
                  <option value="companion" data-i18n="opt_role_companion">–°–ø—É—Ç–Ω–∏–∫</option>
                  <option value="wise_advisor" data-i18n="opt_role_wise">–£–º–Ω—ã–π —Å–æ–≤–µ—Ç—á–∏–∫</option>
                  <option value="comic" data-i18n="opt_role_comic">–ö–æ–º–∏—á–µ—Å–∫–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂</option>
                </select>
              </div>
            </div>

            <div id="secondTypeOtherWrap" class="hidden">
              <label for="second_custom_type_other_text" data-i18n="label_second_custom_type_other">–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø</label>
              <input id="second_custom_type_other_text" name="second_custom_type_other_text" maxlength="60" data-i18n-placeholder="ph_second_custom_type_other" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–ª–∞—á–∫–æ" />
            </div>

            <span class="field-subtitle" data-i18n="label_second_traits">3 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å—Ç—Ä–æ–≥–æ —Ç—Ä–∏)</span>
            <div class="grid-3">
              <input id="second_trait_1" maxlength="20" data-i18n-placeholder="ph_trait_1" placeholder="—Å–º–µ–ª—ã–π" />
              <input id="second_trait_2" maxlength="20" data-i18n-placeholder="ph_trait_2" placeholder="–¥–æ–±—Ä—ã–π" />
              <input id="second_trait_3" maxlength="20" data-i18n-placeholder="ph_trait_3" placeholder="–ª—é–±–æ–ø—ã—Ç–Ω—ã–π" />
            </div>

            <span class="field-subtitle" data-i18n="label_second_markers">–í–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (2‚Äì3 –ø—Ä–∏–∑–Ω–∞–∫–∞)</span>
            <div class="grid-3">
              <input id="second_marker_1" maxlength="40" data-i18n-placeholder="ph_marker_1" placeholder="–≥–æ–ª—É–±–∞—è —à–∞–ø–æ—á–∫–∞" />
              <input id="second_marker_2" maxlength="40" data-i18n-placeholder="ph_marker_2" placeholder="–∫—Ä—É–≥–ª—ã–µ –æ—á–∫–∏" />
              <input id="second_marker_3" maxlength="40" data-i18n-placeholder="ph_marker_3" placeholder="—Ä—é–∫–∑–∞—á–æ–∫ (–æ–ø—Ü.)" />
            </div>

            <div>
              <label for="second_unique_prop" data-i18n="label_second_unique_prop">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ–∫–≤–∏–∑–∏—Ç (1 –ø—Ä–µ–¥–º–µ—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input id="second_unique_prop" name="second_unique_prop" maxlength="40" data-i18n-placeholder="ph_second_unique_prop" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–∞—Å" />
            </div>
          </div>
        </div>

        <!-- –ü.5: –º–µ—Å—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div class="field">
          <label data-i18n="label_setting_mode">–ú–µ—Å—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è *</label>

          <div class="mode-grid mode-grid--2" id="settingModeTiles">
            <button type="button" class="mode-tile mode-tile--active" data-value="preset">
              <span data-i18n="setting_mode_preset_title">–í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ</span>
              <small data-i18n="setting_mode_preset_desc">6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</small>
            </button>

            <button type="button" class="mode-tile" data-value="custom">
              <span data-i18n="setting_mode_custom_title">–ü–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ</span>
              <small data-i18n="setting_mode_custom_desc">–¢–∏–ø, –≤—Ä–µ–º—è, —Å–µ–∑–æ–Ω, –¥–µ—Ç–∞–ª–∏</small>
            </button>
          </div>

          <input type="hidden" id="setting_mode" name="setting_mode" value="preset" />
          <input type="hidden" id="setting_preset_id" name="setting_preset_id" value="fun_yard" />

          <!-- preset places -->
          <div id="settingPresetBlock" class="attention-block">
            <span class="attention-title" data-i18n="setting_presets_title">–ì–æ—Ç–æ–≤—ã–µ –º–µ—Å—Ç–∞</span>
            <div class="preset-grid" id="settingPresetGrid">
              <button type="button" class="preset-btn preset-btn--active" data-preset="fun_yard" id="place_fun_yard">
                <b data-i18n="place_fun_yard_name">–î–≤–æ—Ä –≤–µ—Å—ë–ª—ã—Ö –∏–≥—Ä</b>
                <p data-i18n="place_fun_yard_desc">–î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞ / –¥–≤–æ—Ä / —Å–∞–¥</p>
              </button>
              <button type="button" class="preset-btn" data-preset="warm_home" id="place_warm_home">
                <b data-i18n="place_warm_home_name">–¢—ë–ø–ª—ã–π –¥–æ–º</b>
                <p data-i18n="place_warm_home_desc">–î–æ–º –∏ —Å–µ–º–µ–π–Ω—ã–π –±—ã—Ç</p>
              </button>
              <button type="button" class="preset-btn" data-preset="city_road" id="place_city_road">
                <b data-i18n="place_city_road_name">–î–æ—Ä–æ–≥–∞ –≤ –≥–æ—Ä–æ–¥–µ</b>
                <p data-i18n="place_city_road_desc">–ì–æ—Ä–æ–¥—Å–∫–∞—è —É–ª–∏—Ü–∞ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</p>
              </button>
              <button type="button" class="preset-btn" data-preset="park_nature" id="place_park_nature">
                <b data-i18n="place_park_nature_name">–ü–∞—Ä–∫ –∏ –ø—Ä–∏—Ä–æ–¥–∞</b>
                <p data-i18n="place_park_nature_desc">–ü–∞—Ä–∫ / —ç–∫–æ—Ç—Ä–æ–ø–∞ / –±–µ—Ä–µ–≥</p>
              </button>
              <button type="button" class="preset-btn" data-preset="wonder_lab" id="place_wonder_lab">
                <b data-i18n="place_wonder_lab_name">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —á—É–¥–µ—Å</b>
                <p data-i18n="place_wonder_lab_desc">–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è / –∫—Ä—É–∂–æ–∫ / –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</p>
              </button>
              <button type="button" class="preset-btn" data-preset="book_house" id="place_book_house">
                <b data-i18n="place_book_house_name">–î–æ–º –∫–Ω–∏–≥</b>
                <p data-i18n="place_book_house_desc">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ / –∫–Ω–∏–≥–∏</p>
              </button>
            </div>
          </div>

          <!-- custom place -->
          <div id="settingCustomBlock" class="attention-block hidden">
            <span class="attention-title" data-i18n="setting_custom_title">–ü–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ</span>

            <span class="field-subtitle" data-i18n="label_setting_custom_type">–¢–∏–ø –º–µ—Å—Ç–∞</span>
            <div class="chip-row" id="settingTypeChips">
              <button type="button" class="chip chip--active" data-value="home" data-i18n="opt_place_home">–î–æ–º</button>
              <button type="button" class="chip" data-value="playground" data-i18n="opt_place_playground">–ü–ª–æ—â–∞–¥–∫–∞</button>
              <button type="button" class="chip" data-value="school_garden" data-i18n="opt_place_school">–°–∞–¥ –∏–ª–∏ —à–∫–æ–ª–∞</button>
              <button type="button" class="chip" data-value="park_forest" data-i18n="opt_place_park">–ü–∞—Ä–∫ –∏–ª–∏ –ª–µ—Å</button>
              <button type="button" class="chip" data-value="city" data-i18n="opt_place_city">–ì–æ—Ä–æ–¥</button>
              <button type="button" class="chip" data-value="other" data-i18n="opt_other">–î—Ä—É–≥–æ–µ</button>
            </div>
            <input type="hidden" id="setting_custom_type" name="setting_custom_type" value="home" />

            <div id="settingTypeOtherWrap" class="hidden" style="margin-top:8px;">
              <label for="setting_custom_type_other_text" data-i18n="label_setting_type_other">–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø</label>
              <input id="setting_custom_type_other_text" name="setting_custom_type_other_text" maxlength="60"
                     data-i18n-placeholder="ph_setting_type_other" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –æ–∫–µ–∞–Ω–∞—Ä–∏—É–º" />
            </div>

            <div class="grid-2" style="margin-top:10px;">
              <div>
                <label for="setting_custom_time" data-i18n="label_setting_time">–í—Ä–µ–º—è</label>
                <select id="setting_custom_time" name="setting_custom_time">
                  <option value="morning" data-i18n="opt_time_morning">–£—Ç—Ä–æ</option>
                  <option value="day" data-i18n="opt_time_day" selected>–î–µ–Ω—å</option>
                  <option value="evening" data-i18n="opt_time_evening">–í–µ—á–µ—Ä</option>
                </select>
              </div>
              <div>
                <label for="setting_custom_season" data-i18n="label_setting_season">–°–µ–∑–æ–Ω</label>
                <select id="setting_custom_season" name="setting_custom_season">
                  <option value="spring" data-i18n="opt_season_spring">–í–µ—Å–Ω–∞</option>
                  <option value="summer" data-i18n="opt_season_summer" selected>–õ–µ—Ç–æ</option>
                  <option value="autumn" data-i18n="opt_season_autumn">–û—Å–µ–Ω—å</option>
                  <option value="winter" data-i18n="opt_season_winter">–ó–∏–º–∞</option>
                </select>
              </div>
            </div>

            <span class="field-subtitle" data-i18n="label_setting_details">–¢—Ä–∏ –¥–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞</span>
            <small class="field-hint" data-i18n="hint_setting_details">–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´—Å–∏–Ω—è—è –¥–≤–µ—Ä—å, –∫–æ–≤—ë—Ä —Å–æ –∑–≤—ë–∑–¥–∞–º–∏, –±–æ–ª—å—à–æ–π —Ñ–∏–∫—É—Å¬ª</small>
            <div class="grid-3" style="margin-top:6px;">
              <input id="setting_detail_1" maxlength="40" data-i18n-placeholder="ph_setting_detail_1" placeholder="—Å–∏–Ω—è—è –¥–≤–µ—Ä—å" />
              <input id="setting_detail_2" maxlength="40" data-i18n-placeholder="ph_setting_detail_2" placeholder="–∫–æ–≤—ë—Ä —Å–æ –∑–≤—ë–∑–¥–∞–º–∏" />
              <input id="setting_detail_3" maxlength="40" data-i18n-placeholder="ph_setting_detail_3" placeholder="–±–æ–ª—å—à–æ–π —Ñ–∏–∫—É—Å" />
            </div>

            <span class="field-subtitle" data-i18n="label_setting_realism">–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å</span>
            <div class="chip-row" id="settingRealismChips">
              <button type="button" class="chip chip--active" data-value="life" data-i18n="opt_realism_life">–ö–∞–∫ –≤ –∂–∏–∑–Ω–∏</button>
              <button type="button" class="chip" data-value="slightly_fairy" data-i18n="opt_realism_fairy">–ß—É—Ç—å —Å–∫–∞–∑–æ—á–Ω–æ, –Ω–æ —É–∑–Ω–∞–≤–∞–µ–º–æ</button>
            </div>
            <input type="hidden" id="setting_custom_realism" name="setting_custom_realism" value="life" />
          </div>
        </div>

        <!-- –ü.6 -->
        <div class="field">
          <label for="age_group" data-i18n="label_age_group">–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ *</label>
          <select id="age_group" name="age_group" required>
            <option value="0_3" data-i18n="opt_age_0_3">0‚Äì3</option>
            <option value="4_6" data-i18n="opt_age_4_6" selected>4‚Äì6</option>
            <option value="7_12" data-i18n="opt_age_7_12">7‚Äì12</option>
            <option value="12_16" data-i18n="opt_age_12_16">12‚Äì16</option>
            <option value="16_plus" data-i18n="opt_age_16_plus">16+</option>
          </select>
        </div>

        <!-- –ü.7 -->
        <div class="field">
          <label for="narrative_style" data-i18n="label_narrative_style">–°—Ç–∏–ª—å –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è *</label>
          <select id="narrative_style" name="narrative_style" required>
            <option value="calm" data-i18n="opt_style_calm">–°–ø–æ–∫–æ–π–Ω—ã–π –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π</option>
            <option value="adventure" data-i18n="opt_style_adventure">–ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∏–π</option>
            <option value="mystery" data-i18n="opt_style_mystery">–ó–∞–≥–∞–¥–æ—á–Ω—ã–π</option>
            <option value="humor" data-i18n="opt_style_humor">–° —é–º–æ—Ä–æ–º</option>
            <option value="lyric" data-i18n="opt_style_lyric">–õ–∏—Ä–∏—á–µ—Å–∫–∏–π</option>
          </select>
        </div>

        <!-- –ü.8 -->
        <div class="field">
          <label for="moral_theme" data-i18n="label_moral_theme">–ü–æ—É—á–∏—Ç–µ–ª—å–Ω—ã–π —Å—é–∂–µ—Ç *</label>
          <select id="moral_theme" name="moral_theme" required>
            <option value="kindness_help" data-i18n="opt_moral_kindness_help">–î–æ–±—Ä–æ—Ç–∞ –∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º</option>
            <option value="power_of_friendship" data-i18n="opt_moral_friendship">–°–∏–ª–∞ –¥—Ä—É–∂–±—ã</option>
            <option value="honesty_trust" data-i18n="opt_moral_honesty">–ß–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –¥–æ–≤–µ—Ä–∏–µ</option>
            <option value="accepting_differences" data-i18n="opt_moral_differences">–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–∞–∑–ª–∏—á–∏–π</option>
            <option value="admitting_mistakes" data-i18n="opt_moral_mistakes">–£–º–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏</option>
            <option value="patience_perseverance" data-i18n="opt_moral_patience">–¢–µ—Ä–ø–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å</option>
            <option value="care_for_nature" data-i18n="opt_moral_nature">–ó–∞–±–æ—Ç–∞ –æ –ø—Ä–∏—Ä–æ–¥–µ</option>
            <option value="safety_caution" data-i18n="opt_moral_safety">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å</option>
            <option value="respect_parents_adults" data-i18n="opt_moral_respect">–£–≤–∞–∂–µ–Ω–∏–µ –∫ —Ä–æ–¥–∏—Ç–µ–ª—è–º –∏ –≤–∑—Ä–æ—Å–ª—ã–º</option>
            <option value="sharing" data-i18n="opt_moral_sharing">–£–º–µ–Ω–∏–µ –¥–µ–ª–∏—Ç—å—Å—è</option>
            <option value="independence_responsibility" data-i18n="opt_moral_independence">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</option>
            <option value="emotions_expression" data-i18n="opt_moral_emotions">–≠–º–æ—Ü–∏–∏ –∏ —É–º–µ–Ω–∏–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –Ω–∏—Ö</option>
            <option value="anti_bullying" data-i18n="opt_moral_bullying">–ü—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–ª–ª–∏–Ω–≥—É</option>
            <option value="value_of_work" data-i18n="opt_moral_work">–¶–µ–Ω–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞</option>
            <option value="tidiness_order" data-i18n="opt_moral_tidiness">–ê–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫</option>
            <option value="gadgets_moderation" data-i18n="opt_moral_gadgets">–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –≥–∞–¥–∂–µ—Ç–∞—Ö</option>
            <option value="gratitude" data-i18n="opt_moral_gratitude">–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å</option>
            <option value="imagination_creativity" data-i18n="opt_moral_creativity">–í–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ</option>
          </select>
        </div>

        <!-- –ü.9 -->
        <div class="field">
          <label for="illustration_style_id" data-i18n="label_illustration_style">–°—Ç–∏–ª—å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π *</label>
          <select id="illustration_style_id" name="illustration_style_id" required>
            <option value="storybook_semi_realism" data-i18n="opt_ill_semi_realism">–ü–æ–ª—É-—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∫–Ω–∏–∂–Ω–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è</option>
            <option value="cartoon_3d" data-i18n="opt_ill_3d">3D –º—É–ª—å—Ç</option>
            <option value="watercolor_ink" data-i18n="opt_ill_watercolor_ink">–ê–∫–≤–∞—Ä–µ–ª—å + —Ç—É—à—å</option>
            <option value="gouache_flat" data-i18n="opt_ill_gouache">–ì—É–∞—à—å / –ø–ª–æ—Å–∫–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è —Å –æ–±—ä—ë–º–æ–º</option>
            <option value="clean_vector" data-i18n="opt_ill_vector">–í–µ–∫—Ç–æ—Ä–Ω–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è</option>
            <option value="anime" data-i18n="opt_ill_anime">–ê–Ω–∏–º–µ</option>
          </select>
        </div>

        <!-- –ü.10 -->
        <div class="field">
          <label for="language" data-i18n="label_story_language">–Ø–∑—ã–∫ —Å–∫–∞–∑–∫–∏ *</label>
          <select id="language" name="language" required>
            <option value="ru" data-i18n="opt_lang_ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en" data-i18n="opt_lang_en">English</option>
          </select>
        </div>

        <button type="submit" id="submitBtn" data-i18n="submit">–°–æ–∑–¥–∞—Ç—å —Å–∫–∞–∑–∫—É</button>
        <p class="note" id="note"></p>
      </form>
    </div>
  </main>

  <script>
    const tg = window.Telegram?.WebApp || null;
    const isTelegramWebApp = Boolean(tg && (tg.initData || tg.initDataUnsafe));
    const WEBHOOK_URL = 'https://oglob.app.n8n.cloud/webhook-test/telegram-puzirek';

    if (isTelegramWebApp) { tg.ready(); tg.expand(); }

    const form = document.getElementById('storyForm');
    const submitBtn = document.getElementById('submitBtn');
    const noteEl = document.getElementById('note');

    const sessionId = (crypto?.randomUUID ? crypto.randomUUID() : String(Date.now()) + "_" + Math.random().toString(16).slice(2));

    const I18N = {
      ru: {
        title: "–°–æ–∑–¥–∞—Ç—å —Å–∫–∞–∑–∫—É",
        description: "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî –±–æ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å–∫–∞–∑–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –µ—ë –≤ —á–∞—Ç –≤ –≤–∏–¥–µ PDF-–∫–Ω–∏–≥–∏.",

        label_main_hero_name: "–ò–º—è –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è *",
        ph_main_hero_name: "–ù–∞–ø—Ä–∏–º–µ—Ä, –ê—Ä–∏–Ω–∞",

        label_main_hero_mode: "–í–Ω–µ—à–Ω–æ—Å—Ç—å –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è *",
        main_mode_auto_title: "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–Ω–µ—à–Ω–æ—Å—Ç—å",
        main_mode_auto_desc: "–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤",
        main_mode_select_title: "–í—ã–±—Ä–∞—Ç—å –≤–Ω–µ—à–Ω–æ—Å—Ç—å",
        main_mode_select_desc: "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –∫–æ–∂–∞, –≥–ª–∞–∑–∞, –≤–æ–ª–æ—Å—ã‚Ä¶",
        main_mode_photo_title: "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ",
        main_mode_photo_desc: "–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –≤ —á–∞—Ç –ø–æ—Å–ª–µ —Ñ–æ—Ä–º—ã",
        main_appearance_title: "–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–Ω–µ—à–Ω–æ—Å—Ç–∏ (–¥–ª—è —É–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç–∏)",

        label_main_age_years: "–í–æ–∑—Ä–∞—Å—Ç (—Ü–∏—Ñ—Ä–æ–π)",
        ph_main_age_years: "–ù–∞–ø—Ä–∏–º–µ—Ä, 4",
        label_main_gender: "–ü–æ–ª",
        opt_unspecified: "–ù–µ —É–∫–∞–∑—ã–≤–∞—Ç—å",
        opt_girl: "–î–µ–≤–æ—á–∫–∞",
        opt_boy: "–ú–∞–ª—å—á–∏–∫",

        label_main_skin_tone: "–¢–æ–Ω –∫–æ–∂–∏ *",
        opt_pick: "–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶",
        opt_skin_very_light: "–û—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–π",
        opt_skin_light: "–°–≤–µ—Ç–ª—ã–π",
        opt_skin_medium: "–°—Ä–µ–¥–Ω–∏–π",
        opt_skin_tan: "–°–º—É–≥–ª—ã–π",
        opt_skin_dark: "–¢—ë–º–Ω—ã–π",

        label_main_face_shape: "–§–æ—Ä–º–∞ –ª–∏—Ü–∞",
        opt_face_round: "–ö—Ä—É–≥–ª–æ–µ",
        opt_face_oval: "–û–≤–∞–ª—å–Ω–æ–µ",
        opt_face_long: "–£–¥–ª–∏–Ω—ë–Ω–Ω–æ–µ",

        label_main_face_accent: "–ê–∫—Ü–µ–Ω—Ç –ª–∏—Ü–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        ph_main_face_accent: "–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–µ—Å–Ω—É—à–∫–∏",
        hint_main_face_accent: "–ö–æ—Ä–æ—Ç–∫–∞—è –¥–µ—Ç–∞–ª—å, –∫–æ—Ç–æ—Ä—É—é –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.",

        sub_eyes: "–ì–ª–∞–∑–∞",
        label_main_eyes_color: "–¶–≤–µ—Ç *",
        opt_eyes_brown: "–ö–∞—Ä–∏–µ",
        opt_eyes_blue: "–ì–æ–ª—É–±—ã–µ",
        opt_eyes_gray: "–°–µ—Ä—ã–µ",
        opt_eyes_green: "–ó–µ–ª—ë–Ω—ã–µ",
        opt_eyes_hazel: "–û—Ä–µ—Ö–æ–≤—ã–µ",
        label_main_eyes_shape: "–§–æ—Ä–º–∞",
        opt_eyes_shape_round: "–ö—Ä—É–≥–ª—ã–µ",
        opt_eyes_shape_almond: "–ú–∏–Ω–¥a–ª–µ–≤–∏–¥–Ω—ã–µ",
        label_main_eyes_size: "–†–∞–∑–º–µ—Ä",
        opt_size_small: "–ù–µ–±–æ–ª—å—à–∏–µ",
        opt_size_medium: "–°—Ä–µ–¥–Ω–∏–µ",
        opt_size_large: "–ö—Ä—É–ø–Ω—ã–µ",

        sub_hair: "–í–æ–ª–æ—Å—ã",
        label_main_hair_color: "–¶–≤–µ—Ç *",
        opt_hair_blond: "–ë–ª–æ–Ω–¥",
        opt_hair_light_brown: "–†—É—Å—ã–µ",
        opt_hair_chestnut: "–ö–∞—à—Ç–∞–Ω–æ–≤—ã–µ",
        opt_hair_dark: "–¢—ë–º–Ω—ã–µ",
        opt_hair_red: "–†—ã–∂–∏–µ",
        opt_hair_black: "–ß—ë—Ä–Ω—ã–µ",
        label_main_hair_length: "–î–ª–∏–Ω–∞ *",
        opt_len_very_short: "–û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–µ",
        opt_len_short: "–ö–æ—Ä–æ—Ç–∫–∏–µ",
        opt_len_shoulder: "–î–æ –ø–ª–µ—á",
        opt_len_long: "–î–ª–∏–Ω–Ω—ã–µ",
        label_main_hair_type: "–¢–∏–ø *",
        opt_type_straight: "–ü—Ä—è–º—ã–µ",
        opt_type_wavy: "–í–æ–ª–Ω–∏—Å—Ç—ã–µ",
        opt_type_curly: "–ö—É–¥—Ä—è–≤—ã–µ",
        label_main_hair_density: "–ì—É—Å—Ç–æ—Ç–∞",
        opt_density_thin: "–†–µ–¥–∫–∏–µ",
        opt_density_medium: "–°—Ä–µ–¥–Ω–∏–µ",
        opt_density_thick: "–ì—É—Å—Ç—ã–µ",
        label_main_bangs: "–ß—ë–ª–∫–∞",
        opt_yes: "–ï—Å—Ç—å",
        opt_no: "–ù–µ—Ç",
        label_main_parting: "–ü—Ä–æ–±–æ—Ä",
        opt_left: "–°–ª–µ–≤–∞",
        opt_right: "–°–ø—Ä–∞–≤–∞",
        opt_center: "–ü–æ —Ü–µ–Ω—Ç—Ä—É",

        label_main_nose: "–ù–æ—Å",
        opt_nose_small: "–ú–∞–ª–µ–Ω—å–∫–∏–π",
        opt_nose_medium: "–°—Ä–µ–¥–Ω–∏–π",
        opt_nose_prominent: "–í—ã—Ä–∞–∂–µ–Ω–Ω—ã–π",
        label_main_lips: "–ì—É–±—ã",
        opt_lips_thin: "–¢–æ–Ω–∫–∏–µ",
        opt_lips_medium: "–°—Ä–µ–¥–Ω–∏–µ",
        opt_lips_full: "–ü—É—Ö–ª—ã–µ",

        sub_body: "–¢–µ–ª–æ—Å–ª–æ–∂–µ–Ω–∏–µ",
        label_main_body_type: "–¢–∏–ø",
        opt_body_slim: "–•—É–¥–æ—â–∞–≤–æ–µ",
        opt_body_average: "–°—Ä–µ–¥–Ω–µ–µ",
        opt_body_chubby: "–ü—É—Ö–ª–µ–Ω—å–∫–æ–µ",
        label_main_height_vs_peers: "–†–æ—Å—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤",
        opt_shorter: "–ù–∏–∂–µ",
        opt_avg: "–°—Ä–µ–¥–Ω–∏–π",
        opt_taller: "–í—ã—à–µ",

        label_main_special_features: "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–±—ë–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        ph_main_special_features: "–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—Å–∏—Ç –æ—á–∫–∏ –∫—Ä—É–≥–ª–æ–π —Ñ–æ—Ä–º—ã",
        label_main_signature_look: "–§–∏—Ä–º–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        ph_main_signature_look: "–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ—Å–∏—Ç —Ä–æ–∑–æ–≤—ã–π —Å–≤–∏—Ç–µ—Ä",

        label_second_hero_name: "–ò–º—è –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        ph_second_hero_name: "–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º",
        hint_second_hero_name: "–ï—Å–ª–∏ –∏–º—è –Ω–µ –∑–∞–¥–∞–Ω–æ, –≤—Ç–æ—Ä–æ–π –≥–µ—Ä–æ–π –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è.",

        label_second_hero_mode: "–í–Ω–µ—à–Ω–æ—Å—Ç—å –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è",
        second_mode_preset_title: "–í—ã–±—Ä–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
        second_mode_preset_desc: "6 –≥–æ—Ç–æ–≤—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤",
        second_mode_custom_title: "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä",
        second_mode_custom_desc: "–ö–æ—Ä–æ—Ç–∫–∞—è –∞–Ω–∫–µ—Ç–∞",
        second_mode_photo_title: "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ",
        second_mode_photo_desc: "–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ –≤ —á–∞—Ç –ø–æ—Å–ª–µ —Ñ–æ—Ä–º—ã",
        second_presets_title: "–ì–æ—Ç–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏",
        second_custom_title: "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä (–∫—Ä–∞—Ç–∫–æ)",

        preset_foxik_name: "–õ–∏—Å—ë–Ω–æ–∫ –§–æ–∫—Å–∏–∫",
        preset_foxik_desc: "–ë—ã—Å—Ç—Ä—ã–π, –ª—é–±–æ–ø—ã—Ç–Ω—ã–π, –ª—é–±–∏—Ç –∑–∞–≥–∞–¥–∫–∏ –∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–ª–∞–Ω –ê –∏ –ø–ª–∞–Ω –ë",
        preset_tikhonya_name: "–°–æ–≤–∞ –¢–∏—Ö–æ–Ω—è",
        preset_tikhonya_desc: "–°–ø–æ–∫–æ–π–Ω–∞—è, –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–∞—è, –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω–æ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏",
        preset_bublik_name: "–©–µ–Ω–æ–∫ –ë—É–±–ª–∏–∫",
        preset_bublik_desc: "–î–æ–±—Ä—ã–π –∏ –≤–µ—Ä–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞—à–Ω–æ –∏–ª–∏ –æ–±–∏–¥–Ω–æ",
        preset_pixel_name: "–†–æ–±–æ—Ç –ü–∏–∫—Å–µ–ª—å",
        preset_pixel_desc: "–ò–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫, —Å—Ç—Ä–æ–∏—Ç –∫–∞—Ä—Ç—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞",
        preset_iskrik_name: "–î—Ä–∞–∫–æ–Ω—á–∏–∫ –ò—Å–∫—Ä–∏–∫",
        preset_iskrik_desc: "–ë–µ–∑–æ–±–∏–¥–Ω—ã–π, ¬´—Å–æ–≥—Ä–µ–≤–∞–µ—Ç¬ª —Å–º–µ–ª–æ—Å—Ç—å –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ",
        preset_puzyrek_name: "–ú–æ—Ä—Å–∫–æ–π –∫–æ–Ω—ë–∫ –ü—É–∑—ã—Ä—ë–∫",
        preset_puzyrek_desc: "–ò–≥—Ä–∏–≤—ã–π, –∑–Ω–∞–µ—Ç –º–æ—Ä—Å–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –∏ –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç –≤—ã—Ö–æ–¥",

        label_second_custom_type: "–¢–∏–ø –ø–µ—Ä—Å–æ–Ω–∞–∂–∞",
        opt_second_type_animal: "–ñ–∏–≤–æ—Ç–Ω–æ–µ",
        opt_second_type_human: "–ß–µ–ª–æ–≤–µ–∫",
        opt_second_type_toy: "–ò–≥—Ä—É—à–∫–∞",
        opt_second_type_fantasy: "–°–∫–∞–∑–æ—á–Ω–æ–µ —Å—É—â–µ—Å—Ç–≤–æ",
        opt_second_type_robot: "–†–æ–±–æ—Ç",
        opt_second_type_animated: "–û–∂–∏–≤—à–∏–π –ø—Ä–µ–¥–º–µ—Ç",
        opt_other: "–î—Ä—É–≥–æ–µ",
        label_second_custom_role: "–ö–ª—é—á–µ–≤–∞—è —Ä–æ–ª—å",
        opt_role_helper: "–ü–æ–º–æ—â–Ω–∏–∫",
        opt_role_friend: "–î—Ä—É–≥",
        opt_role_mentor: "–ù–∞—Å—Ç–∞–≤–Ω–∏–∫",
        opt_role_companion: "–°–ø—É—Ç–Ω–∏–∫",
        opt_role_wise: "–£–º–Ω—ã–π —Å–æ–≤–µ—Ç—á–∏–∫",
        opt_role_comic: "–ö–æ–º–∏—á–µ—Å–∫–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂",
        label_second_custom_type_other: "–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø",
        ph_second_custom_type_other: "–ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–ª–∞—á–∫–æ",
        label_second_traits: "3 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (—Å—Ç—Ä–æ–≥–æ —Ç—Ä–∏)",
        ph_trait_1: "—Å–º–µ–ª—ã–π",
        ph_trait_2: "–¥–æ–±—Ä—ã–π",
        ph_trait_3: "–ª—é–±–æ–ø—ã—Ç–Ω—ã–π",
        label_second_markers: "–í–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (2‚Äì3 –ø—Ä–∏–∑–Ω–∞–∫–∞)",
        ph_marker_1: "–≥–æ–ª—É–±–∞—è —à–∞–ø–æ—á–∫–∞",
        ph_marker_2: "–∫—Ä—É–≥–ª—ã–µ –æ—á–∫–∏",
        ph_marker_3: "—Ä—é–∫–∑–∞—á–æ–∫ (–æ–ø—Ü.)",
        label_second_unique_prop: "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–µ–∫–≤–∏–∑–∏—Ç (1 –ø—Ä–µ–¥–º–µ—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",
        ph_second_unique_prop: "–ù–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–∞—Å",

        label_setting_mode: "–ú–µ—Å—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è *",
        setting_mode_preset_title: "–í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ",
        setting_mode_preset_desc: "6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤",
        setting_mode_custom_title: "–ü–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ",
        setting_mode_custom_desc: "–¢–∏–ø, –≤—Ä–µ–º—è, —Å–µ–∑–æ–Ω, –¥–µ—Ç–∞–ª–∏",
        setting_presets_title: "–ì–æ—Ç–æ–≤—ã–µ –º–µ—Å—Ç–∞",
        setting_custom_title: "–ü–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ",

        place_fun_yard_name: "–î–≤–æ—Ä –≤–µ—Å—ë–ª—ã—Ö –∏–≥—Ä",
        place_fun_yard_desc: "–î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞ / –¥–≤–æ—Ä / —Å–∞–¥",
        place_warm_home_name: "–¢—ë–ø–ª—ã–π –¥–æ–º",
        place_warm_home_desc: "–î–æ–º –∏ —Å–µ–º–µ–π–Ω—ã–π –±—ã—Ç",
        place_city_road_name: "–î–æ—Ä–æ–≥–∞ –≤ –≥–æ—Ä–æ–¥–µ",
        place_city_road_desc: "–ì–æ—Ä–æ–¥—Å–∫–∞—è —É–ª–∏—Ü–∞ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç",
        place_park_nature_name: "–ü–∞—Ä–∫ –∏ –ø—Ä–∏—Ä–æ–¥–∞",
        place_park_nature_desc: "–ü–∞—Ä–∫ / —ç–∫–æ—Ç—Ä–æ–ø–∞ / –±–µ—Ä–µ–≥",
        place_wonder_lab_name: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —á—É–¥–µ—Å",
        place_wonder_lab_desc: "–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è / –∫—Ä—É–∂–æ–∫ / –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è",
        place_book_house_name: "–î–æ–º –∫–Ω–∏–≥",
        place_book_house_desc: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ / –∫–Ω–∏–≥–∏",

        label_setting_custom_type: "–¢–∏–ø –º–µ—Å—Ç–∞",
        opt_place_home: "–î–æ–º",
        opt_place_playground: "–ü–ª–æ—â–∞–¥–∫–∞",
        opt_place_school: "–°–∞–¥ –∏–ª–∏ —à–∫–æ–ª–∞",
        opt_place_park: "–ü–∞—Ä–∫ –∏–ª–∏ –ª–µ—Å",
        opt_place_city: "–ì–æ—Ä–æ–¥",
        label_setting_type_other: "–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–∏–ø",
        ph_setting_type_other: "–ù–∞–ø—Ä–∏–º–µ—Ä, –æ–∫–µ–∞–Ω–∞—Ä–∏—É–º",
        label_setting_time: "–í—Ä–µ–º—è",
        opt_time_morning: "–£—Ç—Ä–æ",
        opt_time_day: "–î–µ–Ω—å",
        opt_time_evening: "–í–µ—á–µ—Ä",
        label_setting_season: "–°–µ–∑–æ–Ω",
        opt_season_spring: "–í–µ—Å–Ω–∞",
        opt_season_summer: "–õ–µ—Ç–æ",
        opt_season_autumn: "–û—Å–µ–Ω—å",
        opt_season_winter: "–ó–∏–º–∞",
        label_setting_details: "–¢—Ä–∏ –¥–µ—Ç–∞–ª–∏ –º–µ—Å—Ç–∞",
        hint_setting_details: "–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´—Å–∏–Ω—è—è –¥–≤–µ—Ä—å, –∫–æ–≤—ë—Ä —Å–æ –∑–≤—ë–∑–¥–∞–º–∏, –±–æ–ª—å—à–æ–π —Ñ–∏–∫—É—Å¬ª",
        ph_setting_detail_1: "—Å–∏–Ω—è—è –¥–≤–µ—Ä—å",
        ph_setting_detail_2: "–∫–æ–≤—ë—Ä —Å–æ –∑–≤—ë–∑–¥–∞–º–∏",
        ph_setting_detail_3: "–±–æ–ª—å—à–æ–π —Ñ–∏–∫—É—Å",
        label_setting_realism: "–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å",
        opt_realism_life: "–ö–∞–∫ –≤ –∂–∏–∑–Ω–∏",
        opt_realism_fairy: "–ß—É—Ç—å —Å–∫–∞–∑–æ—á–Ω–æ, –Ω–æ —É–∑–Ω–∞–≤–∞–µ–º–æ",

        label_age_group: "–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ *",
        opt_age_0_3: "0‚Äì3",
        opt_age_4_6: "4‚Äì6",
        opt_age_7_12: "7‚Äì12",
        opt_age_12_16: "12‚Äì16",
        opt_age_16_plus: "16+",

        label_narrative_style: "–°—Ç–∏–ª—å –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è *",
        opt_style_calm: "–°–ø–æ–∫–æ–π–Ω—ã–π –º–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π",
        opt_style_adventure: "–ü—Ä–∏–∫–ª—é—á–µ–Ω—á–µ—Å–∫–∏–π",
        opt_style_mystery: "–ó–∞–≥–∞–¥–æ—á–Ω—ã–π",
        opt_style_humor: "–° —é–º–æ—Ä–æ–º",
        opt_style_lyric: "–õ–∏—Ä–∏—á–µ—Å–∫–∏–π",

        label_moral_theme: "–ü–æ—É—á–∏—Ç–µ–ª—å–Ω—ã–π —Å—é–∂–µ—Ç *",
        opt_moral_kindness_help: "–î–æ–±—Ä–æ—Ç–∞ –∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º",
        opt_moral_friendship: "–°–∏–ª–∞ –¥—Ä—É–∂–±—ã",
        opt_moral_honesty: "–ß–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –¥–æ–≤–µ—Ä–∏–µ",
        opt_moral_differences: "–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–∞–∑–ª–∏—á–∏–π",
        opt_moral_mistakes: "–£–º–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å –æ—à–∏–±–∫–∏",
        opt_moral_patience: "–¢–µ—Ä–ø–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å",
        opt_moral_nature: "–ó–∞–±–æ—Ç–∞ –æ –ø—Ä–∏—Ä–æ–¥–µ",
        opt_moral_safety: "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å",
        opt_moral_respect: "–£–≤–∞–∂–µ–Ω–∏–µ –∫ —Ä–æ–¥–∏—Ç–µ–ª—è–º –∏ –≤–∑—Ä–æ—Å–ª—ã–º",
        opt_moral_sharing: "–£–º–µ–Ω–∏–µ –¥–µ–ª–∏—Ç—å—Å—è",
        opt_moral_independence: "–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å",
        opt_moral_emotions: "–≠–º–æ—Ü–∏–∏ –∏ —É–º–µ–Ω–∏–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –Ω–∏—Ö",
        opt_moral_bullying: "–ü—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–ª–ª–∏–Ω–≥—É",
        opt_moral_work: "–¶–µ–Ω–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞",
        opt_moral_tidiness: "–ê–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä—è–¥–æ–∫",
        opt_moral_gadgets: "–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –≥–∞–¥–∂–µ—Ç–∞—Ö",
        opt_moral_gratitude: "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å",
        opt_moral_creativity: "–í–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ",

        label_illustration_style: "–°—Ç–∏–ª—å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π *",
        opt_ill_semi_realism: "–ü–æ–ª—É-—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∫–Ω–∏–∂–Ω–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è",
        opt_ill_3d: "3D –º—É–ª—å—Ç",
        opt_ill_watercolor_ink: "–ê–∫–≤–∞—Ä–µ–ª—å + —Ç—É—à—å",
        opt_ill_gouache: "–ì—É–∞—à—å / –ø–ª–æ—Å–∫–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è —Å –æ–±—ä—ë–º–æ–º",
        opt_ill_vector: "–í–µ–∫—Ç–æ—Ä–Ω–∞—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è",
        opt_ill_anime: "–ê–Ω–∏–º–µ",

        label_story_language: "–Ø–∑—ã–∫ —Å–∫–∞–∑–∫–∏ *",
        opt_lang_ru: "–†—É—Å—Å–∫–∏–π",
        opt_lang_en: "English",

        submit: "–°–æ–∑–¥–∞—Ç—å —Å–∫–∞–∑–∫—É",

        alert_not_telegram: "–û—Ç–∫—Ä—ã—Ç–æ –Ω–µ –≤–Ω—É—Ç—Ä–∏ Telegram",
        alert_second_custom_invalid: "–î–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è –∑–∞–ø–æ–ª–Ω–∏—Ç–µ 3 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏ –º–∏–Ω–∏–º—É–º 2 –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–∞.",
        alert_setting_custom_invalid: "–î–ª—è –ø–µ—Ä—Å–æ–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ 3 –¥–µ—Ç–∞–ª–∏.",

        note_base: "–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –±–æ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç —Ñ–æ—Ç–æ –≤ —á–∞—Ç–µ. –ú–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ —á–∞—Ç, –∞ MiniApp –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON.",
        note_will_ask: "–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –±–æ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç",
        note_order: "–ü–æ—Ä—è–¥–æ–∫: —Å–Ω–∞—á–∞–ª–∞ –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π, –∑–∞—Ç–µ–º –≤—Ç–æ—Ä–æ–π."
      },

      en: {
        title: "Create a story",
        description: "Fill in the fields ‚Äî the bot will generate a personalised story and send it to the chat as a PDF book.",

        label_main_hero_name: "Main character‚Äôs name *",
        ph_main_hero_name: "For example, Arina",

        label_main_hero_mode: "Main character appearance *",
        main_mode_auto_title: "Suggest an appearance",
        main_mode_auto_desc: "Auto, no parameters",
        main_mode_select_title: "Choose appearance",
        main_mode_select_desc: "Skin, eyes, hair‚Ä¶",
        main_mode_photo_title: "Upload photo",
        main_mode_photo_desc: "Send it in chat after the form",
        main_appearance_title: "Appearance parameters (for recognisability)",

        label_main_age_years: "Age (number)",
        ph_main_age_years: "For example, 4",
        label_main_gender: "Gender",
        opt_unspecified: "Prefer not to say",
        opt_girl: "Girl",
        opt_boy: "Boy",

        label_main_skin_tone: "Skin tone *",
        opt_pick: "Select‚Ä¶",
        opt_skin_very_light: "Very light",
        opt_skin_light: "Light",
        opt_skin_medium: "Medium",
        opt_skin_tan: "Tan",
        opt_skin_dark: "Dark",

        label_main_face_shape: "Face shape",
        opt_face_round: "Round",
        opt_face_oval: "Oval",
        opt_face_long: "Long",

        label_main_face_accent: "Face accent (optional)",
        ph_main_face_accent: "For example, freckles",
        hint_main_face_accent: "A short detail worth preserving.",

        sub_eyes: "Eyes",
        label_main_eyes_color: "Colour *",
        opt_eyes_brown: "Brown",
        opt_eyes_blue: "Blue",
        opt_eyes_gray: "Grey",
        opt_eyes_green: "Green",
        opt_eyes_hazel: "Hazel",
        label_main_eyes_shape: "Shape",
        opt_eyes_shape_round: "Round",
        opt_eyes_shape_almond: "Almond",
        label_main_eyes_size: "Size",
        opt_size_small: "Small",
        opt_size_medium: "Medium",
        opt_size_large: "Large",

        sub_hair: "Hair",
        label_main_hair_color: "Colour *",
        opt_hair_blond: "Blonde",
        opt_hair_light_brown: "Light brown",
        opt_hair_chestnut: "Chestnut",
        opt_hair_dark: "Dark",
        opt_hair_red: "Red",
        opt_hair_black: "Black",
        label_main_hair_length: "Length *",
        opt_len_very_short: "Very short",
        opt_len_short: "Short",
        opt_len_shoulder: "Shoulder length",
        opt_len_long: "Long",
        label_main_hair_type: "Type *",
        opt_type_straight: "Straight",
        opt_type_wavy: "Wavy",
        opt_type_curly: "Curly",
        label_main_hair_density: "Density",
        opt_density_thin: "Thin",
        opt_density_medium: "Medium",
        opt_density_thick: "Thick",
        label_main_bangs: "Bangs",
        opt_yes: "Yes",
        opt_no: "No",
        label_main_parting: "Parting",
        opt_left: "Left",
        opt_right: "Right",
        opt_center: "Center",

        label_main_nose: "Nose",
        opt_nose_small: "Small",
        opt_nose_medium: "Medium",
        opt_nose_prominent: "Prominent",
        label_main_lips: "Lips",
        opt_lips_thin: "Thin",
        opt_lips_medium: "Medium",
        opt_lips_full: "Full",

        sub_body: "Build",
        label_main_body_type: "Type",
        opt_body_slim: "Slim",
        opt_body_average: "Average",
        opt_body_chubby: "Chubby",
        label_main_height_vs_peers: "Height vs peers",
        opt_shorter: "Shorter",
        opt_avg: "Average",
        opt_taller: "Taller",

        label_main_special_features: "Child‚Äôs features (optional)",
        ph_main_special_features: "For example, wears round glasses",
        label_main_signature_look: "Signature look (optional)",
        ph_main_signature_look: "For example, wears a pink jumper",

        label_second_hero_name: "Second character‚Äôs name (optional)",
        ph_second_hero_name: "You may leave this empty",
        hint_second_hero_name: "If empty, the second character will not be added.",

        label_second_hero_mode: "Second character appearance",
        second_mode_preset_title: "Pick a character",
        second_mode_preset_desc: "6 ready presets",
        second_mode_custom_title: "Custom",
        second_mode_custom_desc: "Short questionnaire",
        second_mode_photo_title: "Upload photo",
        second_mode_photo_desc: "Send it in chat after the form",
        second_presets_title: "Ready characters",
        second_custom_title: "Custom (short)",

        preset_foxik_name: "Fox cub Foxik",
        preset_foxik_desc: "Fast and curious; loves riddles and always offers plan A and plan B",
        preset_tikhonya_name: "Owl Tikhonya",
        preset_tikhonya_desc: "Calm and observant; explains complex things simply",
        preset_bublik_name: "Puppy Bublik",
        preset_bublik_desc: "Kind and loyal; supports you when you‚Äôre scared or upset",
        preset_pixel_name: "Robot Pixel",
        preset_pixel_desc: "Inventive helper; builds maps and useful gadgets",
        preset_iskrik_name: "Little dragon Iskrik",
        preset_iskrik_desc: "Harmless; ‚Äúwarms up‚Äù courage and lifts the mood",
        preset_puzyrek_name: "Seahorse Puzyrek",
        preset_puzyrek_desc: "Playful; knows sea secrets and always finds a way out",

        label_second_custom_type: "Character type",
        opt_second_type_animal: "Animal",
        opt_second_type_human: "Human",
        opt_second_type_toy: "Toy",
        opt_second_type_fantasy: "Fantasy creature",
        opt_second_type_robot: "Robot",
        opt_second_type_animated: "Animated object",
        opt_other: "Other",
        label_second_custom_role: "Key role",
        opt_role_helper: "Helper",
        opt_role_friend: "Friend",
        opt_role_mentor: "Mentor",
        opt_role_companion: "Companion",
        opt_role_wise: "Wise advisor",
        opt_role_comic: "Comic character",
        label_second_custom_type_other: "Specify type",
        ph_second_custom_type_other: "For example, a little cloud",
        label_second_traits: "3 traits (exactly three)",
        ph_trait_1: "brave",
        ph_trait_2: "kind",
        ph_trait_3: "curious",
        label_second_markers: "Visual markers (2‚Äì3)",
        ph_marker_1: "blue hat",
        ph_marker_2: "round glasses",
        ph_marker_3: "small backpack (opt.)",
        label_second_unique_prop: "Unique prop (one item, optional)",
        ph_second_unique_prop: "For example, a compass",

        label_setting_mode: "Setting *",
        setting_mode_preset_title: "Pick a place",
        setting_mode_preset_desc: "6 presets",
        setting_mode_custom_title: "Personalised place",
        setting_mode_custom_desc: "Type, time, season, details",
        setting_presets_title: "Preset places",
        setting_custom_title: "Personalised place",

        place_fun_yard_name: "Playful yard",
        place_fun_yard_desc: "Playground / yard / kindergarten",
        place_warm_home_name: "Warm home",
        place_warm_home_desc: "Home and family life",
        place_city_road_name: "City road",
        place_city_road_desc: "Street and transport",
        place_park_nature_name: "Park and nature",
        place_park_nature_desc: "Park / eco trail / riverside",
        place_wonder_lab_name: "Wonder lab",
        place_wonder_lab_desc: "Workshop / club / lab",
        place_book_house_name: "House of books",
        place_book_house_desc: "Library / books",

        label_setting_custom_type: "Place type",
        opt_place_home: "Home",
        opt_place_playground: "Playground",
        opt_place_school: "Nursery or school",
        opt_place_park: "Park or forest",
        opt_place_city: "City",
        label_setting_type_other: "Specify type",
        ph_setting_type_other: "For example, an aquarium",
        label_setting_time: "Time of day",
        opt_time_morning: "Morning",
        opt_time_day: "Day",
        opt_time_evening: "Evening",
        label_setting_season: "Season",
        opt_season_spring: "Spring",
        opt_season_summer: "Summer",
        opt_season_autumn: "Autumn",
        opt_season_winter: "Winter",
        label_setting_details: "Three place details",
        hint_setting_details: "For example: ‚Äúblue door, starry carpet, big ficus‚Äù",
        ph_setting_detail_1: "blue door",
        ph_setting_detail_2: "starry carpet",
        ph_setting_detail_3: "big ficus",
        label_setting_realism: "Realism",
        opt_realism_life: "Like real life",
        opt_realism_fairy: "Slightly fairy, but recognisable",

        label_age_group: "Age group *",
        opt_age_0_3: "0‚Äì3",
        opt_age_4_6: "4‚Äì6",
        opt_age_7_12: "7‚Äì12",
        opt_age_12_16: "12‚Äì16",
        opt_age_16_plus: "16+",

        label_narrative_style: "Narrative style *",
        opt_style_calm: "Gentle, meditative",
        opt_style_adventure: "Adventurous",
        opt_style_mystery: "Mysterious",
        opt_style_humor: "Humorous",
        opt_style_lyric: "Lyrical",

        label_moral_theme: "Educational plot *",
        opt_moral_kindness_help: "Kindness and helping others",
        opt_moral_friendship: "Power of friendship",
        opt_moral_honesty: "Honesty and trust",
        opt_moral_differences: "Accepting differences",
        opt_moral_mistakes: "Admitting mistakes",
        opt_moral_patience: "Patience and perseverance",
        opt_moral_nature: "Caring for nature",
        opt_moral_safety: "Safety and caution",
        opt_moral_respect: "Respect for parents and adults",
        opt_moral_sharing: "Sharing",
        opt_moral_independence: "Independence and responsibility",
        opt_moral_emotions: "Emotions and talking about them",
        opt_moral_bullying: "Standing up to bullying",
        opt_moral_work: "Value of work",
        opt_moral_tidiness: "Tidiness and order",
        opt_moral_gadgets: "Moderation with gadgets",
        opt_moral_gratitude: "Gratitude",
        opt_moral_creativity: "Imagination and creativity",

        label_illustration_style: "Illustration style *",
        opt_ill_semi_realism: "Semi-realistic storybook",
        opt_ill_3d: "3D cartoon",
        opt_ill_watercolor_ink: "Watercolor + ink",
        opt_ill_gouache: "Gouache flat-shaded",
        opt_ill_vector: "Clean vector",
        opt_ill_anime: "Anime",

        label_story_language: "Story language *",
        opt_lang_ru: "Russian",
        opt_lang_en: "English",

        submit: "Create story",

        alert_not_telegram: "Not opened inside Telegram",
        alert_second_custom_invalid: "For a custom second character, fill 3 traits and at least 2 visual markers.",
        alert_setting_custom_invalid: "For a personalised place, fill 3 details.",

        note_base: "After submitting, the bot may ask for photos in the chat. Media is sent in chat; the MiniApp sends a structured JSON payload.",
        note_will_ask: "After submission, the bot will ask for",
        note_order: "Order: main character first, then second."
      }
    };

    function t(key){
      return (I18N[currentLang] && I18N[currentLang][key]) ? I18N[currentLang][key] : key;
    }

    function applyI18n(){
      document.documentElement.lang = currentLang;
      document.querySelectorAll('[data-i18n]').forEach((el) => {
        el.textContent = t(el.getAttribute('data-i18n'));
      });
      document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
        el.placeholder = t(el.getAttribute('data-i18n-placeholder'));
      });
      updateNote();
    }

    function setActiveLangButton(){
      document.getElementById('btnLangRu').classList.toggle('lang-btn--active', currentLang === 'ru');
      document.getElementById('btnLangEn').classList.toggle('lang-btn--active', currentLang === 'en');
    }

    // default UI lang: URL > Telegram profile > en
    const urlParams = new URLSearchParams(window.location.search);
    const langFromUrl = (urlParams.get('lang') || "").toLowerCase();
    const tgLang = (tg?.initDataUnsafe?.user?.language_code || "").toLowerCase();
    let currentLang = (langFromUrl === "ru" || langFromUrl === "en") ? langFromUrl : (tgLang.startsWith("ru") ? "ru" : "en");

    setActiveLangButton();
    applyI18n();

    document.querySelectorAll('.lang-btn').forEach((btn) => {
      btn.addEventListener('click', () => {
        const lang = btn.dataset.lang;
        if (lang === currentLang) return;
        currentLang = lang;
        setActiveLangButton();
        applyI18n();
      });
    });

    // helpers
    function setActiveModeTile(groupEl, value){
      groupEl.querySelectorAll('.mode-tile').forEach((b) => b.classList.toggle('mode-tile--active', b.dataset.value === value));
    }
    function setActivePreset(gridEl, value){
      gridEl.querySelectorAll('.preset-btn').forEach((b) => b.classList.toggle('preset-btn--active', b.dataset.preset === value));
    }
    function setActiveChip(groupEl, value){
      groupEl.querySelectorAll('.chip').forEach((b) => b.classList.toggle('chip--active', b.dataset.value === value));
    }

    // MAIN HERO MODE
    const mainHeroModeTiles = document.getElementById('mainHeroModeTiles');
    const mainHeroModeInput = document.getElementById('main_hero_appearance_mode');
    const mainHeroAppearanceBlock = document.getElementById('mainHeroAppearanceBlock');

    function setRequiredMainAppearance(on){
      const ids = ['main_skin_tone','main_eyes_color','main_hair_color','main_hair_length','main_hair_type'];
      ids.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.required = Boolean(on);
      });
    }

    function applyMainHeroMode(mode){
      mainHeroModeInput.value = mode;
      setActiveModeTile(mainHeroModeTiles, mode);
      const show = (mode === 'select');
      mainHeroAppearanceBlock.classList.toggle('hidden', !show);
      setRequiredMainAppearance(show);
      updateNote();
    }

    mainHeroModeTiles.addEventListener('click', (e) => {
      const btn = e.target.closest('.mode-tile');
      if (!btn) return;
      applyMainHeroMode(btn.dataset.value);
    });
    applyMainHeroMode(mainHeroModeInput.value);

    // SECOND HERO VISIBILITY + MODE
    const secondHeroNameInput = document.getElementById('second_hero_name');
    const secondHeroAppearanceField = document.getElementById('secondHeroAppearanceField');
    const secondHeroModeTiles = document.getElementById('secondHeroModeTiles');
    const secondHeroModeInput = document.getElementById('second_hero_mode');

    const secondHeroPresetBlock = document.getElementById('secondHeroPresetBlock');
    const secondHeroCustomBlock = document.getElementById('secondHeroCustomBlock');
    const secondHeroPresetGrid = document.getElementById('secondHeroPresetGrid');
    const secondHeroPresetIdInput = document.getElementById('second_hero_preset_id');

    function applySecondHeroMode(mode){
      secondHeroModeInput.value = mode;
      setActiveModeTile(secondHeroModeTiles, mode);
      secondHeroPresetBlock.classList.toggle('hidden', mode !== 'preset');
      secondHeroCustomBlock.classList.toggle('hidden', mode !== 'custom');
      updateNote();
    }

    function applySecondHeroVisibility(){
      const hasSecond = secondHeroNameInput.value.trim().length > 0;
      secondHeroAppearanceField.classList.toggle('hidden', !hasSecond);
      if (!hasSecond){
        secondHeroModeInput.value = 'none';
      } else {
        if (secondHeroModeInput.value === 'none') secondHeroModeInput.value = 'preset';
        applySecondHeroMode(secondHeroModeInput.value);
      }
      updateNote();
    }

    secondHeroNameInput.addEventListener('input', applySecondHeroVisibility);

    secondHeroModeTiles.addEventListener('click', (e) => {
      const btn = e.target.closest('.mode-tile');
      if (!btn) return;
      applySecondHeroMode(btn.dataset.value);
    });

    secondHeroPresetGrid.addEventListener('click', (e) => {
      const btn = e.target.closest('.preset-btn');
      if (!btn) return;
      const preset = btn.dataset.preset;
      if (!preset) return;
      secondHeroPresetIdInput.value = preset;
      setActivePreset(secondHeroPresetGrid, preset);
    });

    const secondCustomType = document.getElementById('second_custom_type');
    const secondTypeOtherWrap = document.getElementById('secondTypeOtherWrap');
    secondCustomType.addEventListener('change', () => {
      secondTypeOtherWrap.classList.toggle('hidden', secondCustomType.value !== 'other');
    });

    // init second hero
    setActivePreset(secondHeroPresetGrid, secondHeroPresetIdInput.value);
    applySecondHeroVisibility();

    // SETTING MODE
    const settingModeTiles = document.getElementById('settingModeTiles');
    const settingModeInput = document.getElementById('setting_mode');
    const settingPresetIdInput = document.getElementById('setting_preset_id');
    const settingPresetBlock = document.getElementById('settingPresetBlock');
    const settingCustomBlock = document.getElementById('settingCustomBlock');
    const settingPresetGrid = document.getElementById('settingPresetGrid');

    function applySettingMode(mode){
      settingModeInput.value = mode;
      setActiveModeTile(settingModeTiles, mode);
      settingPresetBlock.classList.toggle('hidden', mode !== 'preset');
      settingCustomBlock.classList.toggle('hidden', mode !== 'custom');
    }

    settingModeTiles.addEventListener('click', (e) => {
      const btn = e.target.closest('.mode-tile');
      if (!btn) return;
      applySettingMode(btn.dataset.value);
    });

    settingPresetGrid.addEventListener('click', (e) => {
      const btn = e.target.closest('.preset-btn');
      if (!btn) return;
      const preset = btn.dataset.preset;
      if (!preset) return;
      settingPresetIdInput.value = preset;
      setActivePreset(settingPresetGrid, preset);
    });

    // custom place: type chips + realism chips
    const settingTypeChips = document.getElementById('settingTypeChips');
    const settingCustomTypeInput = document.getElementById('setting_custom_type');
    const settingTypeOtherWrap = document.getElementById('settingTypeOtherWrap');

    settingTypeChips.addEventListener('click', (e) => {
      const btn = e.target.closest('.chip');
      if (!btn) return;
      const v = btn.dataset.value;
      settingCustomTypeInput.value = v;
      setActiveChip(settingTypeChips, v);
      settingTypeOtherWrap.classList.toggle('hidden', v !== 'other');
    });

    const settingRealismChips = document.getElementById('settingRealismChips');
    const settingRealismInput = document.getElementById('setting_custom_realism');
    settingRealismChips.addEventListener('click', (e) => {
      const btn = e.target.closest('.chip');
      if (!btn) return;
      const v = btn.dataset.value;
      settingRealismInput.value = v;
      setActiveChip(settingRealismChips, v);
    });

    // init setting
    setActivePreset(settingPresetGrid, settingPresetIdInput.value);
    applySettingMode(settingModeInput.value);

    // NOTE (dynamic photo requests)
    function buildPostSubmitPhotoRequests(){
      const arr = [];
      if (mainHeroModeInput.value === 'photo') arr.push('main_hero');

      const hasSecond = secondHeroNameInput.value.trim().length > 0;
      const secondMode = hasSecond ? secondHeroModeInput.value : 'none';
      if (secondMode === 'photo') arr.push('second_hero');

      return arr;
    }

    function updateNote(){
      const requests = buildPostSubmitPhotoRequests();
      if (requests.length === 0){
        noteEl.textContent = t('note_base');
        return;
      }
      const mapRuEn = {
        main_hero: (currentLang === 'ru') ? "—Ñ–æ—Ç–æ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è" : "main character photo",
        second_hero: (currentLang === 'ru') ? "—Ñ–æ—Ç–æ –≤—Ç–æ—Ä–æ–≥–æ –≥–µ—Ä–æ—è" : "second character photo"
      };
      const list = requests.map((k) => mapRuEn[k]).join(", ");
      noteEl.textContent = `${t('note_base')} ${t('note_will_ask')}: ${list}. ${t('note_order')}`;
    }

    // validations
    function validateSecondHeroCustomIfNeeded(){
      const hasSecond = secondHeroNameInput.value.trim().length > 0;
      if (!hasSecond) return true;
      if (secondHeroModeInput.value !== 'custom') return true;

      const trait1 = document.getElementById('second_trait_1').value.trim();
      const trait2 = document.getElementById('second_trait_2').value.trim();
      const trait3 = document.getElementById('second_trait_3').value.trim();

      const m1 = document.getElementById('second_marker_1').value.trim();
      const m2 = document.getElementById('second_marker_2').value.trim();

      return Boolean(trait1 && trait2 && trait3 && m1 && m2);
    }

    function validateSettingCustomIfNeeded(){
      if (settingModeInput.value !== 'custom') return true;
      const d1 = document.getElementById('setting_detail_1').value.trim();
      const d2 = document.getElementById('setting_detail_2').value.trim();
      const d3 = document.getElementById('setting_detail_3').value.trim();
      return Boolean(d1 && d2 && d3);
    }

    // SUBMIT
    form.addEventListener('submit', async (event) => {
      event.preventDefault();
      submitBtn.disabled = true;

      if (!isTelegramWebApp) {
        alert(t('alert_not_telegram'));
        submitBtn.disabled = false;
        return;
      }

      if (!validateSecondHeroCustomIfNeeded()){
        alert(t('alert_second_custom_invalid'));
        submitBtn.disabled = false;
        return;
      }

      if (!validateSettingCustomIfNeeded()){
        alert(t('alert_setting_custom_invalid'));
        submitBtn.disabled = false;
        return;
      }

      const mainMode = mainHeroModeInput.value;
      const mainHeroAppearance = (mainMode === 'select') ? {
        age_years: document.getElementById('main_age_years').value.trim() || null,
        gender: document.getElementById('main_gender').value,
        skin_tone: document.getElementById('main_skin_tone').value,
        face_shape: document.getElementById('main_face_shape').value,
        face_accent: document.getElementById('main_face_accent').value.trim() || null,
        eyes_color: document.getElementById('main_eyes_color').value,
        eyes_shape: document.getElementById('main_eyes_shape').value,
        eyes_size: document.getElementById('main_eyes_size').value,
        hair_color: document.getElementById('main_hair_color').value,
        hair_length: document.getElementById('main_hair_length').value,
        hair_type: document.getElementById('main_hair_type').value,
        hair_density: document.getElementById('main_hair_density').value,
        bangs: document.getElementById('main_bangs').value,
        parting: document.getElementById('main_parting').value,
        nose: document.getElementById('main_nose').value,
        lips: document.getElementById('main_lips').value,
        body_type: document.getElementById('main_body_type').value,
        height_vs_peers: document.getElementById('main_height_vs_peers').value,
        special_features: document.getElementById('main_special_features').value.trim() || null,
        signature_look: document.getElementById('main_signature_look').value.trim() || null
      } : null;

      const secondName = secondHeroNameInput.value.trim() || null;
      const hasSecond = Boolean(secondName);
      const secondMode = hasSecond ? (secondHeroModeInput.value || 'preset') : 'none';

      let secondHeroPresetId = null;
      let secondHeroCustom = null;

      if (hasSecond && secondMode === 'preset'){
        secondHeroPresetId = secondHeroPresetIdInput.value;
      }
      if (hasSecond && secondMode === 'custom'){
        const type = document.getElementById('second_custom_type').value;
        secondHeroCustom = {
          type,
          type_other_text: (type === 'other') ? (document.getElementById('second_custom_type_other_text').value.trim() || null) : null,
          role: document.getElementById('second_custom_role').value,
          traits: [
            document.getElementById('second_trait_1').value.trim(),
            document.getElementById('second_trait_2').value.trim(),
            document.getElementById('second_trait_3').value.trim()
          ],
          visual_markers: [
            document.getElementById('second_marker_1').value.trim(),
            document.getElementById('second_marker_2').value.trim(),
            document.getElementById('second_marker_3').value.trim()
          ].filter(Boolean).slice(0, 3),
          unique_prop: document.getElementById('second_unique_prop').value.trim() || null
        };
      }

      const settingMode = settingModeInput.value;
      let settingPresetId = null;
      let settingCustom = null;

      if (settingMode === 'preset'){
        settingPresetId = settingPresetIdInput.value;
      } else {
        const placeType = settingCustomTypeInput.value;
        settingCustom = {
          type: placeType,
          type_other_text: (placeType === 'other') ? (document.getElementById('setting_custom_type_other_text').value.trim() || null) : null,
          time_of_day: document.getElementById('setting_custom_time').value,
          season: document.getElementById('setting_custom_season').value,
          details: [
            document.getElementById('setting_detail_1').value.trim(),
            document.getElementById('setting_detail_2').value.trim(),
            document.getElementById('setting_detail_3').value.trim()
          ],
          realism: settingRealismInput.value
        };
      }

      const payload = {
        type: 'storybook_form',
        session_id: sessionId,
        lang: currentLang,
        form_data: {
          main_hero_name: document.getElementById('main_hero_name').value.trim(),
          main_hero_appearance_mode: mainMode,
          main_hero_appearance: mainHeroAppearance,

          second_hero_name: secondName,
          second_hero_mode: secondMode,
          second_hero_preset_id: secondHeroPresetId,
          second_hero_custom: secondHeroCustom,

          setting_mode: settingMode,
          setting_preset_id: settingPresetId,
          setting_custom: settingCustom,

          age_group: document.getElementById('age_group').value,
          narrative_style: document.getElementById('narrative_style').value,
          moral_theme: document.getElementById('moral_theme').value,
          illustration_style_id: document.getElementById('illustration_style_id').value,
          language: document.getElementById('language').value,

          ui_language: currentLang,
          post_submit_photo_requests: buildPostSubmitPhotoRequests()
        },
        telegram: {
          initData: tg.initData,
          user: tg.initDataUnsafe?.user || null
        }
      };

      try {
        await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        tg.close();
      } catch (err) {
        console.error(err);
        submitBtn.disabled = false;
      }
    });

    // initial note
    updateNote();
  </script>
</body>
</html>
